!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.Router=e()}(this,function(){"use strict";function t(t,e){return-1===t.href.indexOf(e)}function e(t){return t.origin.indexOf("mailto")>-1}function n(t){return t.metaKey||t.ctrlKey}function i(t){return 0!==t.button}function o(t,e){for(var n,i=[],o=0,s=0,u="",h=e&&e.delimiter||p,c=e&&e.delimiters||d,l=!1;null!==(n=m.exec(t));){var f=n[0],g=n[1],v=n.index;if(u+=t.slice(s,v),s=v+f.length,g)u+=g[1],l=!0;else{var _="",x=t[s],R=n[2],k=n[3],b=n[4],w=n[5];if(!l&&u.length){var y=u.length-1;c.indexOf(u[y])>-1&&(_=u[y],u=u.slice(0,y))}u&&(i.push(u),u="",l=!1);var E=""!==_&&void 0!==x&&x!==_,A="+"===w||"*"===w,P="?"===w||"*"===w,C=_||h,L=k||b;i.push({name:R||o++,prefix:_,delimiter:C,optional:P,repeat:A,partial:E,pattern:L?a(L):"[^"+r(C)+"]+?"})}}return(u||s<t.length)&&i.push(u+t.substr(s)),i}function r(t){return t.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function a(t){return t.replace(/([=!:$\/()])/g,"\\$1")}function s(t){return t&&t.sensitive?"":"i"}function u(t,e){if(!e)return t;var n=t.source.match(/\((?!\?)/g);if(n)for(var i=0;i<n.length;i++)e.push({name:i,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,pattern:null});return t}function h(t,e,n){for(var i=[],o=0;o<t.length;o++)i.push(f(t[o],e,n).source);return new RegExp("(?:"+i.join("|")+")",s(n))}function c(t,e,n){return l(o(t,n),e,n)}function l(t,e,n){for(var i=(n=n||{}).strict,o=!1!==n.end,a=r(n.delimiter||p),u=n.delimiters||d,h=[].concat(n.endsWith||[]).map(r).concat("$").join("|"),c="",l=!1,f=0;f<t.length;f++){var m=t[f];if("string"==typeof m)c+=r(m),l=f===t.length-1&&u.indexOf(m[m.length-1])>-1;else{var g=r(m.prefix),v=m.repeat?"(?:"+m.pattern+")(?:"+g+"(?:"+m.pattern+"))*":m.pattern;e&&e.push(m),m.optional?m.partial?c+=g+"("+v+")?":c+="(?:"+g+"("+v+"))?":c+=g+"("+v+")"}}return o?(i||(c+="(?:"+a+")?"),c+="$"===h?"$":"(?="+h+")"):(i||(c+="(?:"+a+"(?="+h+"))?"),l||(c+="(?="+a+"|"+h+")")),new RegExp("^"+c,s(n))}function f(t,e,n){return t instanceof RegExp?u(t,e):Array.isArray(t)?h(t,e,n):c(t,e,n)}var p="/",d="./",m=new RegExp(["(\\\\.)","(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?"].join("|"),"g");class g{constructor(t,e){this.path=t,this.callback=e,this._keys=[],this._options={},this.regex=f(this.path,this._keys,this._options)}matches(t){return!!this.regex.exec(decodeURIComponent(t))}parsePath(t){let e=this.regex.exec(decodeURIComponent(t));if(!e)return console.log("[Route] 404 - No route matched path: ",pathname),!1;let n={};for(let t=0;t<this._keys.length;t++){let i=this._keys[t],o=e[t+1];o&&(n[i.name]=decodeURIComponent(o),i.repeat&&(n[i.name]=n[i.name].split(i.delimiter)))}return n}}class v{constructor(){this._routeMap=new Map,this._onClick=this._onClick.bind(this),this._onPopState=this._onPopState.bind(this)}_addEventListeners(){document.addEventListener("click",this._onClick),window.addEventListener("popstate",this._onPopState)}_removeEventListeners(){document.removeEventListener("click",this._onClick),window.removeEventListener("popstate",this._onPopState)}_onPopState(t){let e=location;this._handleRoute(e.pathname)}_onClick(o){if(!i(o)&&!n(o)){let n,i=o.target;if(o.composedPath){let t=o.composedPath();for(let e=0,i=t.length;e<i;e++){let i=t[e];if("A"===i.tagName){n=i;break}}}else for(;i;){if("A"===i.tagName){n=i;break}i=i.parentNode}if(n&&!n.hasAttribute("target")&&!n.hasAttribute("download")&&n.hasAttribute("href")){let i=location.origin,r=location.hostname,a=n.getAttribute("href"),s=new URL(a,i);t(s,r)||e(s)||(o.preventDefault(),this._handleRequest(s))}}}_handleRequest(t){let e=t.pathname;this._handleRoute(e),this._setPushState(e)}_handleRoute(t){let e=this._getRoute(t);if(!e)return void console.log("[Router] 404 - No route matched path: ",t);let n={};n.url=window.location,n.params=e.parsePath(t),e.callback.call({},n)}_setPushState(t){let e={};history.pushState(e,"",t)}_getRoute(t){let e;for(let[n,i]of this._routeMap){if((e=i).matches(t)){console.log("[Router] Route matched path: ",t);break}e=null}return e}enable(){this._addEventListeners();let t=location;this._handleRoute(t.pathname)}disable(){this._removeEventListeners()}route(t,e){let n=new g(t,e);this._routeMap.set(n.regex,n)}}return v});
//# sourceMappingURL=router.bundle.js.map
